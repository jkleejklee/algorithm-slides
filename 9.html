<!doctype html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

	<title>ç®—æ³•åˆ†æä¸è®¾è®¡II</title>

	<link rel="stylesheet" href="dist/reset.css">
	<link rel="stylesheet" href="dist/reveal.css">
	<link rel="stylesheet" href="dist/theme/white.css">

	<!-- Theme used for syntax highlighted code -->
	<link rel="stylesheet" href="plugin/highlight/monokai.css">
</head>

<body>
	<div class="reveal">
		<div class="slides">
			<section data-markdown>
				## #9 è®¡ç®—å‡ ä½•
			</section>
			<section>
				<section data-markdown>
					<textarea data-template>
					## 9.1 ç‚¹ä¸çº¿
					------
					- åœ¨è®¡ç®—å‡ ä½•ä¸­ï¼Œé‡‡ç”¨<span class="blue">å‘é‡</span>(vectorï¼Œä¹Ÿç§°çŸ¢é‡)è¿›è¡Œåˆ†æ
					- ç©ºé—´ä¸­çš„ç‚¹$p_1(x,y)$å¯ä»¥è¡¨ç¤ºä¸ºå‘é‡$\vec{p_1}$ï¼Œç›¸å½“äºåŸç‚¹æŒ‡å‘è¯¥ç‚¹çš„æœ‰å‘çº¿æ®µ
					- ä¸¤ä¸ªå‘é‡çš„<span class="blue">å‰ç§¯</span>å®šä¹‰ä¸ºï¼š$\vec{p_1}\times \vec{p_2}=p_1.x\times p_2.y-p_2.x\times p_1.y$
					- ç©ºé—´ä¸¤ç‚¹$p_0,p_1$æ„æˆæœ‰å‘çº¿æ®µè¡¨ç¤ºä¸ºå‘é‡$\overrightarrow{p_0p_1}$ï¼Œ$p_0,p_1$æ„æˆæœ‰å‘çº¿æ®µè¡¨ç¤ºä¸ºå‘é‡$\overrightarrow{p_0p_1}$ï¼Œä»¥çº¿æ®µç«¯ç‚¹è®¡ç®—çš„<span class="blue">å‰ç§¯</span>å…¬å¼ä¸ºï¼š
					$$\begin{aligned}\overrightarrow{p_0p_1}\times \overrightarrow{p_0p_1}=(p_1.x-p_0.x)\times (p_2.y-p_0.y) \\\ -(p_2.x-p_0.x)\times (p_1.y-p_0.y) \end{aligned}$$
					</textarea>
				</section>
				<section data-markdown>
					<textarea data-template>
					### å‰ç§¯çš„æ€§è´¨
					------
					- \> 0 è¡¨æ˜ä»¥$p_0$ä¸ºå…¬å…±ç‚¹ï¼Œçº¿æ®µ$p_0p_1$åœ¨$p_0p_2$é¡ºæ—¶é’ˆæ–¹å‘
					- < 0 è¡¨æ˜ä»¥$p_0$ä¸ºå…¬å…±ç‚¹ï¼Œçº¿æ®µ$p_0p_1$åœ¨$p_0p_2$é€†æ—¶é’ˆæ–¹å‘
					- = 0 è¡¨æ˜çº¿æ®µ$p_0p_1$å’Œ$p_0p_2$å…±çº¿
						- ç»å¸¸ç”¨ä¸‰ä¸ªç‚¹çš„å‰ç§¯å€¼æ¥åˆ¤æ–­ç‚¹å’Œçº¿æ®µçš„å…³ç³»ï¼š
					- \> 0 è¡¨æ˜$p_2$åœ¨$p_0p_1$çš„é€†æ—¶é’ˆæ–¹å‘
					- < 0 è¡¨æ˜$p_2$åœ¨$p_0p_1$çš„é¡ºæ—¶é’ˆæ–¹å‘
					- = 0 è¡¨æ˜$p_2$åœ¨è¿‡$p_0p_1$çš„ç›´çº¿ä¸Š

					<span style="float: right;zoom: 50%; position: relative;top: 200px; right: 100px;">

					![img](img/9-1.png)
					</span>
					</textarea>
				</section>
				<section data-markdown>
					<textarea data-template>
					### çº¿æ®µç›¸äº¤åˆ¤æ–­
					------
					- $p_3p_4$å’Œ$p_3p_1$çš„å‰ç§¯ä¸ºè´Ÿï¼Œ$p_3p_4$ä¸$p_3p_2$å‰ç§¯ä¸ºæ­£ï¼Œè¯´æ˜$p_1$å’Œ$p_2$è·¨ç«‹åœ¨$p_3p_4$ä¸¤ç«¯ï¼ŒåŒç†ï¼Œ$p_3$å’Œ$p_4$è·¨ç«‹åœ¨$p_1p_2$ä¸¤ç«¯ï¼Œä¸¤çº¿æ®µç›¸äº¤
					- $p_3p_4$å’Œ$p_3p_1$çš„å‰ç§¯ä¸ºè´Ÿï¼Œ $p_3p_4$ä¸$p_3p_2$å‰ç§¯ä¹Ÿä¸ºè´Ÿï¼Œè¯´æ˜$p_1$å’Œ$p_2$åœ¨$p_3p_4$åŒä¾§ï¼Œä¸¤çº¿æ®µä¸ç›¸äº¤
					
					![img](img/9-2.png)
					</textarea>
				</section>
				<section data-markdown>
					<textarea data-template>
					### çº¿æ®µç›¸äº¤åˆ¤æ–­
					------
					- å›¾(a)ï¼Œ$p_3p_1$å’Œ$p_3p_2$çš„å‰ç§¯ä¸º0ï¼Œğ‘3åœ¨$p_1p_2$ä¸Šï¼Œä¸¤çº¿æ®µç›¸äº¤
					- å›¾(b)ï¼Œ $p_3p_1$å’Œ$p_3p_2$çš„å‰ç§¯ä¸º0ï¼Œ $p_3$åœ¨$p_1p_2$å¤–ï¼Œä¸¤çº¿æ®µä¸ç›¸äº¤
					- æ‰€ä»¥å½“å‰ç§¯å‡ºç°0æ—¶è¿˜éœ€åˆ¤æ–­ç‚¹æ˜¯å¦åœ¨çº¿æ®µå†…ï¼Œåªè¦æ¯”è¾ƒ$p_3.x$æ˜¯å¦åœ¨$p_1.x$å’Œ$p_2.x$ä¹‹é—´ï¼Œ$p_3.y$æ˜¯å¦åœ¨$p_1.y$å’Œ$p_2.y$ä¹‹é—´ï¼ŒåŒæ—¶æ»¡è¶³ï¼Œåˆ™$p_3$åœ¨$p_1p_2$ä¸Š
					
					![img](img/9-3.png)
					</textarea>
				</section>
				<section data-markdown>
					<textarea data-template>
					###	[1410 -- Intersection (poj.org)](http://poj.org/problem?id=1410)
					------
					- You are to write a program that has to decide whether a given line segment intersects a given rectangle.
					- An example:
						- line: start point: (4,9)
						- end point: (11,2)
						- rectangle: left-top: (1,5)
						- right-bottom: (7,1)
					- The line is said to intersect the rectangle if the line and the rectangle have at least one point in common. The rectangle consists of four straight lines and the area in between. Although all input values are integer numbers, valid intersection points do not have to lay on the integer grid.
					
					<span style="float: right; position: relative;top: -430px; right: 150px;">

					![img](img/1410.jpg)
					</span>
					</textarea>
				</section>			
				<section>
					<pre><code data-trim data-noescape data-line-numbers="5-20|21-38|50-56" ><script type="text/template">
						#include <cstdio>
						#include <algorithm>
						using namespace std;
						const int N = 750;
						struct Point
						{
							int x, y;
							Point(){};
							Point(int x, int y) : x(x), y(y) {}
						};
						int cross(Point p1, Point p2, Point p0)
						{
							return (p1.x - p0.x) * (p2.y - p0.y)  
								- (p2.x - p0.x) * (p1.y - p0.y);
						}
						bool onSegment(Point p1, Point p2, Point p0)
						{
							return (p0.x >= min(p1.x, p2.x)) && (p0.x <= max(p1.x, p2.x)) 
								&& (p0.y >= min(p1.y, p2.y)) && (p0.y <= max(p1.y, p2.y));
						}
						bool interesect(Point p1, Point p2, Point p3, Point p4)
						{
							int d1 = cross(p2, p3, p1);
							int d2 = cross(p2, p4, p1);
							int d3 = cross(p1, p4, p3);
							int d4 = cross(p2, p4, p3);
							if (d1 * d2 < 0 && d3 * d4 < 0)
								return true;
							else if (!d1 && onSegment(p1, p2, p3))
								return true;
							else if (!d2 && onSegment(p1, p2, p4))
								return true;
							else if (!d3 && onSegment(p3, p4, p1))
								return true;
							else if (!d4 && onSegment(p3, p4, p2))
								return true;
							return false;
						}
						int main()
						{
							int n;
							scanf("%d", &n);
							while (n--)
							{
								Point p1, p2, p3, p4;
								scanf("%d%d%d%d%d%d%d%d", 
									&p1.x, &p1.y, &p2.x, &p2.y, &p3.x, &p3.y, &p4.x, &p4.y);
								Point p5 = Point(p4.x, p3.y);
								Point p6 = Point(p3.x, p4.y);
								//åˆ¤æ–­çº¿æ®µåœ¨çŸ©é˜µå†…åªéœ€åˆ¤æ–­ä¸€ç‚¹åœ¨çŸ©é˜µå†…
								bool ans = false;
								ans = ans || interesect(p1, p2, p3, p5);
								ans = ans || interesect(p1, p2, p6, p4);
								ans = ans || interesect(p1, p2, p3, p6);
								ans = ans || interesect(p1, p2, p5, p4);
								ans = ans || onSegment(p3, p4, p1);
								printf("%c\n", ans ? 'T' : 'F');
							}
							return 0;
						}							
					</script></code></pre>
				</section>
			</section>
			<section>
				<section data-markdown>
					<textarea data-template>
					## 9.2 å¤šè¾¹å½¢
					------
					<div class="small">

					1. å‰ç§¯çš„å¦ä¸€ç§è§£é‡Šå°±æ˜¯å¹³è¡Œå››è¾¹å½¢çš„<span class="blue">æœ‰å‘é¢ç§¯</span>
					2. æœ‰å‘ä¸‰è§’å½¢é¢ç§¯å°±å¯ä»¥é€šè¿‡å‰ç§¯è®¡ç®—å‡ºæ¥
					$$Area(p_0p_1p_2)=\frac{\overrightarrow{p_0p_1}\times \overrightarrow{p_0p_2}}{2}$$
					3. ä»¥$p_1$ä¸ºæ‰‡é¢ä¸­å¿ƒï¼Œè¿æ¥$p_1p_i$å°±å¾—åˆ°$n-2$ä¸ªä¸‰è§’å½¢
						- ç”±äºå‡¸æ€§ï¼Œä¿è¯è¿™äº›ä¸‰è§’å½¢å…¨åœ¨å¤šè¾¹å½¢å†…
						- ç”±äºå‰ç§¯è®¡ç®—å‡ºæ¥çš„é¢ç§¯æ˜¯æœ‰æ­£è´Ÿçš„ï¼Œæ‰€ä»¥é¢ç§¯ä¹Ÿé€‚ç”¨äºå‡¹å¤šè¾¹å½¢çš„æƒ…å†µ
					$$A=\sum\limits_{i = 1}^{n-2}{A_i}$$
					4. å°†æ‰‡é¢ä¸­å¿ƒç§»åˆ°(0,0)ç‚¹ï¼Œå°±å¯ä»¥å¾—åˆ°æ›´ä¸€èˆ¬çš„é¢ç§¯å…¬å¼
					$$A=\sum(x_iy_{i+1}+x_{i+1}y_i)$$

					<span style="float: right;zoom: 50%; position: relative; right: 100px;">

					![img](img/9-4.png)
					</span>
					</div>
					</textarea>
				</section>
				<section data-markdown>
					<textarea data-template>
					###	[1269 -- Intersecting Lines (poj.org)](http://poj.org/problem?id=1269)
					------
					- ç»™å‡º4ä¸ªç‚¹ï¼Œåˆ¤æ–­é€šè¿‡å‰ä¸¤ç‚¹çš„ç›´çº¿å’Œé€šè¿‡åä¸¤ç‚¹ç›´çº¿çš„ç›¸äº’å…³ç³»ï¼Œç›¸äº¤ã€å¹³è¡Œè¿˜æ˜¯å…±çº¿ï¼Œç›¸äº¤çš„è¯æ±‚äº¤ç‚¹åæ ‡
					- äº¤ç‚¹åæ ‡ç”¨å‰ç§¯(é¢ç§¯)å±æ€§æ¥æ±‚ï¼Œå¦‚å›¾ï¼Œæ¨å¯¼å‡ºäº¤ç‚¹$P$çš„å…¬å¼ä¸º
					$$\frac{P_3P}{PP_4}=\frac{A_1}{A_2}=\frac{P_3-P}{P_4-P}\Rightarrow P=\frac{P_3\times A_2-P_4\times A_1}{A_2-A_1}$$
					å…¶ä¸­ï¼š$A_1=Area(P_1P_2P_3),A_2=Area(P_1P_2P_4)$
						- $A_1$å’Œ$A_2$éƒ½ä¸º0è¯´æ˜å…±çº¿
						- $A_1$ç­‰äº$A_2$è¯´æ˜å¹³è¡Œ
						- å¦åˆ™å¯ä»¥æ±‚å‡ºäº¤ç‚¹$P$

					<span style="float: right;zoom: 40%; position: relative;bottom: 400px; right: 200px;">

					![img](img/9-5.png)
					</span>
				</textarea>
				</section>
				<section>
					<pre><code data-trim data-noescape data-line-numbers="13-27" ><script type="text/template">
						#include <cstdio>
						using namespace std;
						struct Point
						{
							int x, y;
							Point(){};
							Point(int x, int y) : x(x), y(y) {}
						};
						int cross(Point p1, Point p2, Point p0)
						{
						return (p1.x - p0.x) * (p2.y - p0.y) - (p2.x - p0.x) * (p1.y - p0.y);
						}
						void intersection(Point p1, Point p2, Point p3, Point p4)
						{
							int s1 = cross(p1, p2, p3);
							int s2 = cross(p1, p2, p4);
							if (s1 == 0 && s2 == 0)
								printf("LINE\n"); //ä¸¤çº¿é‡åˆ
							else if (s1 == s2)
								printf("NONE\n"); //ä¸¤çº¿å¹³è¡Œä¸é‡åˆ
							else
							{
								double x = (p3.x * s2 - p4.x * s1) * 1.0 / (s2 - s1);
								double y = (p3.y * s2 - p4.y * s1) * 1.0 / (s2 - s1);
								printf("POINT %.2lf %.2lf\n", x, y); //ä¸¤çº¿ç›¸äº¤,äº¤ç‚¹ä¸º(x,y)
							}
						}
						int main()
						{
							int n;
							Point p1, p2, p3, p4;
							scanf("%d", &n);
							printf("INTERSECTING LINES OUTPUT\n");
							while (n--)
							{
								scanf("%d%d%d%d", &p1.x, &p1.y, &p2.x, &p2.y);
								scanf("%d%d%d%d", &p3.x, &p3.y, &p4.x, &p4.y);
								intersection(p1, p2, p3, p4);
							}
							printf("END OF OUTPUT\n");
							return 0;
						}													
					</script></code></pre>
				</section>
				<section data-markdown>
					<textarea data-template>
					### å‡¸åŒ…
					------
					- <span class="blue">å‡¸åŒ…</span>(Convex hull) çš„é—®é¢˜ï¼Œå³æ‰¾ä¸€ä¸ªåŒ…å«æ‰€æœ‰ç‚¹çš„æœ€å°å‡¸å¤šè¾¹å½¢ï¼Œæ‰€æœ‰çš„ç‚¹è¦ä¹ˆåœ¨å¤šè¾¹å½¢çš„è¾¹ä¸Šï¼Œè¦ä¹ˆåœ¨å…¶å†…éƒ¨
					- ä¾‹ï¼šå¤šè¾¹å½¢$p_2p_7p_8p_5p_9$ä¸ºç‚¹é›†$\\{ p_1,p_2,\ldots ,p_9\\}$çš„å‡¸åŒ…
					- <span class="blue">è‘›ç«‹æ’æ‰«ææ³•</span>(Graham's scan)æ±‚å‡¸åŒ…
						- åœ¨æ‰€æœ‰ç‚¹ä¸­é€‰æ‹©å·¦ä¸‹ç‚¹ä½œä¸º$p_0$ï¼Œå°†å‰©ä½™ç‚¹æŒ‰ç…§<span class="blue">æè§’</span>å¤§å°æ’åºï¼Œä¹‹åå°†$p_0,p_1$æ”¾å…¥æ ˆä¸­ï¼Œ
						è®¡ç®—æ¬¡æ ˆé¡¶ç‚¹ã€æ ˆé¡¶ç‚¹å’Œä¸‹ä¸€ä¸ªé¡ºåºç‚¹çš„å‰ç§¯å€¼ï¼Œå¦‚æœä¸ºæ­£ï¼Œæ ˆé¡¶ä¿ç•™ï¼Œå¦‚æœä¸ºè´Ÿï¼Œåˆ™æ ˆé¡¶ç‚¹å‡ºæ ˆï¼›
						ä¸‹ä¸€ä¸ªé¡ºåºç‚¹å…¥æ ˆï¼Œç»§ç»­ä»¥ä¸Šæ“ä½œï¼Œæœ€åæ ˆä¸­çš„ç‚¹å°±æ˜¯æ‰€æ±‚å‡¸åŒ…çš„é¡¶ç‚¹

					![img](img/9-6.png)
					</textarea>
				</section>
				<section data-markdown>
					<textarea data-template>
					###	[3348 -- Cows (poj.org)](http://poj.org/problem?id=3348)
					------
					- ç»™å‡º$n$æ£µæ ‘çš„åæ ‡$p(x,y)$ï¼Œç”¨è¿™äº›æ ‘å›´æˆç‰§åœºï¼Œæ¯å¤´ç‰›è‡³å°‘éœ€è¦50å¹³æ–¹ç±³æ´»åŠ¨åŒºé—´ï¼Œé—®ç‰§åœºæœ€å¤šèƒ½æ”¾ä¸‹å¤šå°‘å¤´ç‰›
				</textarea>
				</section>
				<section>
					<pre><code data-trim data-noescape data-line-numbers="22-39|47-49,51" ><script type="text/template">
						#include <cstdio>
						#include <algorithm>
						using namespace std;
						const int N = 1001;
						struct Point
						{
							int x, y;
							Point() {}
							Point(int x, int y) : x(x), y(y) {}
						} v[N], p[N];
						
						int dist(Point p1, Point p2)
						{
							return (p1.x - p2.x) * (p1.x - p2.x) 
							+ (p1.y - p2.y) * (p1.y - p2.y);
						}
						int cross(Point p1, Point p2, Point p0)
						{
							return (p1.x - p0.x) * (p2.y - p0.y) 
							- (p2.x - p0.x) * (p1.y - p0.y);
						}
						int cmp(Point p1, Point p2)
						{
							return cross(p[0], p1, p2) > 0 || (!cross(p[0], p1, p2) 
							&& dist(p[0], p1) < dist(p[0], p2));
						}
						int convex(int n)
						{
							v[0] = p[0];
							v[1] = p[1];
							int top = 1; //ç±»ä¼¼å †æ ˆå­˜å‚¨å‡¸åŒ…é¡¶ç‚¹ï¼Œtopä¸ºæ ˆé¡¶ï¼Œä¹Ÿæ˜¯æ ˆå†…å…ƒç´ ä¸ªæ•°
							for (int i = 2; i < n; i++)
							{
								while (cross(v[top - 1], v[top], p[i]) < 0)
									top--;
								v[++top] = p[i];
							}
							return top;
						}
						int main()
						{
							int n;
							scanf("%d", &n);
							for (int i = 0; i < n; i++)
							{
								scanf("%d%d", &p[i].x, &p[i].y);
								// p[0]ä¸ºyå€¼æœ€å°(æœ€å°yå€¼ç›¸ç­‰åˆ™é€‰xå€¼æœ€å°)çš„ç‚¹
								if (p[0].x > p[i].x || (p[0].x == p[i].x && p[0].y > p[i].y))
									swap(p[0], p[i]);
							}
							sort(p + 1, p + n, cmp); //æŒ‰ç…§æè§’é€’å¢æ’åº
							int m = convex(n);
							int ans = 0;
							for (int i = 0; i < m; i++)
								ans += cross(v[i], v[i + 1], p[0]);
							printf("%d\n", ans / 100);
							return 0;
						}																			
					</script></code></pre>
				</section>
			</section>
		</div>
	</div>

	<script src="dist/reveal.js"></script>
	<script src="plugin/notes/notes.js"></script>
	<script src="plugin/markdown/markdown.js"></script>
	<script src="plugin/math/math.js"></script>
	<script src="plugin/highlight/highlight.js"></script>
	<script>
		// More info about initialization & config:
		// - https://revealjs.com/initialization/
		// - https://revealjs.com/config/
		Reveal.initialize({
			hash: true,
			slideNumber: true,
			width: 1024, 
			height: 768,
			// Learn about plugins: https://revealjs.com/plugins/
			plugins: [RevealMarkdown, RevealHighlight, RevealNotes, RevealMath.KaTeX]
		});
	</script>
</body>

</html>