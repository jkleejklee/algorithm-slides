<!doctype html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

	<title>ç®—æ³•åˆ†æä¸è®¾è®¡II</title>

	<link rel="stylesheet" href="dist/reset.css">
	<link rel="stylesheet" href="dist/reveal.css">
	<link rel="stylesheet" href="dist/theme/white.css">

	<!-- Theme used for syntax highlighted code -->
	<link rel="stylesheet" href="plugin/highlight/vs.min.css">
</head>

<body>
	<div class="reveal">
		<div class="slides">
			<section data-markdown>
				## #3 åŸºç¡€æ•°æ®ç»“æ„
			</section>
			<section>
				<section data-markdown>
					<textarea data-template>
					## 3.1 å †æ ˆ
					------
					![img](img/3-1.png)	
					- <span class="blue">å †æ ˆ</span>(stack)æ˜¯åŸºç¡€çš„æ•°æ®ç»“æ„ï¼Œæ˜¯ä¸€ç§<span class="blue">æŠ½è±¡æ•°æ®ç±»å‹</span>(ADT, Abstract Data Type)ï¼Œå…¶ç‰¹ç‚¹æ˜¯åè¿›å…ˆå‡º(LIFO, Last In First Out)
					</textarea>
				</section>
				<section data-markdown>
					<textarea data-template>
					## å †æ ˆ
					------
					- åœ¨C++ STLä¸­æä¾›äº†ä¸“é—¨çš„[stack](http://www.cplusplus.com/reference/stack/stack/)å®ç°å †æ ˆçš„åŸºæœ¬åŠŸèƒ½
					- æ‰‹åŠ¨å®ç°æ ˆçš„æ“ä½œä¹Ÿå¾ˆå®¹æ˜“ï¼Œå¦‚æœç©ºé—´å…è®¸ï¼Œå¯ä»¥ä½¿ç”¨æ•°ç»„ï¼Œé¢„å…ˆä¸ºå †æ ˆåˆ†é…è¶³å¤Ÿçš„ç©ºé—´ï¼›å¦‚æœç©ºé—´ç´§å¼ ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨é“¾è¡¨ï¼ŒåŠ¨æ€çš„æ”¹å˜å †æ ˆçš„ç©ºé—´
					- å‡½æ•°çš„è°ƒç”¨å’Œè¿”å›ï¼Œåœ¨è®¡ç®—æœºç³»ç»Ÿä¸­å°±æ˜¯é€šè¿‡å †æ ˆæ¥å®ç°çš„ï¼Œç³»ç»Ÿå †æ ˆç©ºé—´å¹¶ä¸æ˜¯æ— é™çš„ï¼Œæ‰€ä»¥é™åˆ¶äº†å‡½æ•°è°ƒç”¨çš„å±‚æ¬¡å’Œè§„æ¨¡ï¼Œé€’å½’ç®—æ³•æ˜¯å‡½æ•°çš„åå¤è°ƒç”¨ï¼Œæ‰€ä»¥æ›´éœ€è¦æ³¨æ„
					</textarea>
				</section>
				<section data-markdown>
					<textarea data-template>
					## åŸºæœ¬æ“ä½œ
					------
					
					```python
					//å°†å…ƒç´ xåŠ å…¥å †æ ˆSï¼ŒS.topä¸ºæ ˆé¡¶ä½ç½®ï¼Œå…ƒç´ å…¥æ ˆï¼Œæ ˆé¡¶ä½ç½®åŠ 1
					PUSH(S,x) 
						S.top = S.top + 1 
						S[S.top] = x
					
					
					//æ ˆé¡¶å…ƒç´ å‡ºæ ˆï¼Œæ ˆé¡¶ä½ç½®å‡1ï¼Œè¿”å›æ ˆé¡¶å…ƒç´ çš„å€¼
					POP(S) 
						if S.top>0
							S.top = S.top - 1
						return S[S.top + 1]
					</textarea>
				</section>
				<section data-markdown>
					<textarea data-template>
					###	[1363 -- Rails (poj.org)](http://poj.org/problem?id=1363)
					------
					![img](img/3-2.png)	
					- å¦‚å›¾çš„è½¦ç«™ï¼Œå¯ä»¥é€šè¿‡æ“ä½œå°†Aåºåˆ—è½¬å˜æˆBåºåˆ—ã€‚ç°åœ¨Aä¸º1åˆ°nçš„é¡ºåºåºåˆ—ï¼Œé—®ç»™å‡ºä¸€ä¸ªåºåˆ—Bï¼Œèƒ½å¦é€šè¿‡Aç”Ÿæˆ
					</textarea>
				</section>
				<section>
					<pre><code data-trim data-noescape data-line-numbers="4-24" ><script type="text/template">
							#include <cstdio>
							#include <stack>
							using namespace std;
							bool solve(int n)
							{
								int a = 1;
								bool p = true; //åˆ¤æ–­æ˜¯å¦èƒ½å¤ŸæˆåŠŸè¾“å‡ºB
								stack<int> S;
								while (n--)
								{
									int b; //Båºåˆ—ä¸­çš„æ•°å­—
									scanf("%d", &b);
									if (!b)
										return false;
									while (a <= b)
										S.push(a++);
									if (!S.empty() && S.top() == b)
										S.pop();
									else
										p = false;
								}
								printf(p ? "Yes\n" : "No\n");
								return true;
							}
							int main()
							{
								int n;
								while (scanf("%d", &n) && n)
								{
									while (solve(n))
										;
									printf("\n");
								}
								return 0;
							}							
					</script></code></pre>
				</section>
			</section>
			<section>
				<section data-markdown>
					<textarea data-template>
					## 3.2 é˜Ÿåˆ—
					------
					![img](img/3-3.png)	
					- <span class="blue">é˜Ÿåˆ—(queue)</span>ä¹Ÿæ˜¯ä¸€ç§æŠ½è±¡æ•°æ®ç±»å‹ï¼Œå…¶ç‰¹ç‚¹æ˜¯å…ˆè¿›å…ˆå‡º(FIFO, First-In-First-Out)
					- é€šå¸¸æƒ…å†µä¸‹ï¼Œåªå…è®¸åœ¨é˜Ÿåˆ—åç«¯(rear)å…¥é˜Ÿåˆ—(Enqueue)ï¼Œåœ¨é˜Ÿåˆ—å‰ç«¯(front)å‡ºé˜Ÿåˆ—(Dequeue)
					</textarea>
				</section>
				<section data-markdown>
					<textarea data-template>
					## é˜Ÿåˆ—
					------
					- åœ¨C++ STLä¸­æä¾›äº†ä¸“é—¨çš„[queue](http://www.cplusplus.com/reference/queue/)å®ç°é˜Ÿåˆ—çš„åŸºæœ¬åŠŸèƒ½
					- åœ¨é˜Ÿåˆ—çš„æ“ä½œçš„è¿‡ç¨‹ä¸­ï¼Œæ¯æ¬¡è¿›è¡Œ1ä¸ªå…ƒç´ çš„å…¥é˜Ÿæˆ–è€…å‡ºé˜Ÿï¼Œå¦‚æœå…ƒç´ æ•°é‡è¿‡å¤šï¼Œéœ€è¦åå¤è¿›è¡Œæ“ä½œçš„è¯ï¼Œè¿™ä¸ªæ—¶å€™ä¸é€‚åˆä½¿ç”¨é˜Ÿåˆ—
					- åœ¨è®¡ç®—æœºç³»ç»Ÿä¸­ï¼Œç¼“å†²åŒºç®¡ç†å°±æ˜¯é‡‡ç”¨é˜Ÿåˆ—å®ç°ï¼Œå½“é˜Ÿåˆ—ç©ºé—´æ»¡è€Œæ²¡æœ‰æœ‰æ•ˆæ£€æŸ¥æ—¶ï¼Œä¼šå‡ºç°<span class="red">ç¼“å†²åŒºæº¢å‡º(Buffer overflow)</span>ï¼Œåˆ©ç”¨ç³»ç»Ÿä¸­çš„ç¼“å†²åŒºæº¢å‡ºæ˜¯é»‘å®¢æ”»å‡»ç³»ç»Ÿçš„å¸¸ç”¨æ‰‹æ®µ
					- é˜Ÿåˆ—é€šå¸¸é‡‡ç”¨é“¾è¡¨æˆ–è€…æ•°ç»„æ¥å®ç°ï¼Œä½¿ç”¨æ•°ç»„çš„æ—¶å€™ä¼šå‡ºç°<span class="red">â€œä¼ªæº¢å‡ºâ€</span>çš„ç°è±¡ï¼Œå°±æ˜¯æ•°ç»„è¿›è¡Œä¸€å®šé‡çš„å…¥é˜Ÿå‡ºé˜Ÿæ“ä½œä¹‹åï¼Œé˜Ÿåˆ—å¤´è¿˜æœ‰ç©ºé—´ï¼Œè€Œé˜Ÿåˆ—å°¾å·²æ»¡è€Œæ— æ³•å…¥é˜Ÿï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¸¸å¸¸é‡‡ç”¨å¾ªç¯é˜Ÿåˆ—çš„æ–¹å¼
					- æ•°ç»„å®ç°é˜Ÿåˆ—æ—¶ï¼Œé˜Ÿåˆ—ç©ºé—´ä¸æ–¹ä¾¿æ‰©å±•ï¼Œè€Œé‡‡ç”¨<span class="blue">é“¾è¡¨</span>å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜
					- åœ¨å¹¿åº¦ä¼˜å…ˆæœç´¢ä¸­ï¼Œé€šå¸¸è¦ä½¿ç”¨åˆ°é˜Ÿåˆ—
					</textarea>
				</section>
				<section data-markdown>
					<textarea data-template>
					## åŸºæœ¬æ“ä½œ
					------

					```python
					// å°†å…ƒç´ xåŠ å…¥é˜Ÿåˆ—Qï¼Œé˜Ÿåˆ—å°¾ä½ç½®åŠ 1
					Enqueue(Q,x)
						Q[Q.rear]=x
						Q.rear=Q.rear+1
					
						
					// å‡ºé˜Ÿåˆ—ï¼Œè¿”å›é˜Ÿåˆ—å¤´å…ƒç´ ï¼Œé˜Ÿåˆ—å¤´ä½ç½®åŠ 1
					Dequeue(Q)
						x=Q[Q.front]
						Q.front=Q.front+1
						return x						
					</textarea>
				</section>
				<section data-markdown>
					<textarea data-template>
					###	[2823 -- Sliding Window (poj.org)](http://poj.org/problem?id=2823)
					------
					- An array of size $n\leqslant10^6$ is given to you. There is a sliding window of size $k$ which is moving from the very left of the array to the very right. 
					You can only see the $k$ numbers in the window. Each time the sliding window moves rightwards by one position. 
					- Following is an example:
						- The array is [1 3 -1 -3 5 3 6 7], and $k$ is 3
					- Your task is to determine the maximum and minimum values in the sliding window at each position.
					</textarea>
				</section>
				<section data-markdown>
					<textarea data-template>
					###	example
					------
					
					| Window position     | Minimum value | Maximum value |
					| ------------------- | :-----------: | :-----------: |
					| [1 3 -1] -3 5 3 6 7 | -1            | 3             |
					| 1 [3 -1 -3] 5 3 6 7 | -3            | 3             |
					| 1 3 [-1 -3 5] 3 6 7 | -3            | 5             |
					| 1 3 -1 [-3 5 3] 6 7 | -3            | 5             |
					| 1 3 -1 -3 [5 3 6] 7 | 3             | 6             |
					| 1 3 -1 -3 5 [3 6 7] | 3             | 7             |
					</textarea>
				</section>
				<section>
					<pre><code data-trim data-noescape data-line-numbers="9-34" ><script type="text/template">
							#include <cstdio>
							#include <queue>
							using namespace std;
							int a[1000005];
							int main()
							{
								int n, k;
								scanf("%d%d", &n, &k);
								//æ±‚åŒºé—´æœ€å°å€¼
								deque<int> minQ;
								for (int i = 1; i <= n; i++)
								{
									scanf("%d", &a[i]);
									while (!minQ.empty() && a[i] < a[minQ.back()])
										minQ.pop_back();
									minQ.push_back(i);
									if (minQ.front() < i - k + 1)
										minQ.pop_front();
									if (i >= k)
										printf("%d ", a[minQ.front()]);
								}
								printf("\n");
								//æ±‚åŒºé—´æœ€å¤§å€¼
								deque<int> maxQ;
								for (int i = 1; i <= n; i++)
								{
									while (!maxQ.empty() && a[i] > a[maxQ.back()])
										maxQ.pop_back();
									maxQ.push_back(i);
									if (maxQ.front() < i - k + 1)
										maxQ.pop_front();
									if (i >= k)
										printf("%d ", a[maxQ.front()]);
								}
								printf("\n");
								return 0;
							}
														
					</script></code></pre>
				</section>
			</section>
		    <section>
				<section data-markdown>
					<textarea data-template>
					## 3.3 å †
					------
					- <span class="blue">å †</span>(heap)æ˜¯ä¸€ç§ç‰¹åˆ«çš„å®Œå…¨äºŒå‰æ ‘ï¼Œå¦‚æœå®Œå…¨äºŒå‰æ ‘ä¸­æ¯ä¸ªèŠ‚ç‚¹çš„å€¼éƒ½å°äºç­‰äºå…¶å­èŠ‚ç‚¹çš„å€¼ï¼Œç§°ä¸º<span class="blue">æœ€å°å †</span>(min heap)ï¼›
					åä¹‹ï¼Œå¦‚æœæ¯ä¸ªèŠ‚ç‚¹çš„å€¼éƒ½å¤§äºç­‰äºå…¶å­èŠ‚ç‚¹çš„å€¼ï¼Œç§°ä¸º<span class="blue">æœ€å¤§å †</span>(max heap)
					- åœ¨C++ STLä¸­çš„ä¼˜å…ˆé˜Ÿåˆ—[priority_queue](http://www.cplusplus.com/reference/queue/priority_queue/)å°±æ˜¯å †çš„å®ç°ï¼Œå¯¹äºå †çš„åº”ç”¨å¯ä»¥ç›´æ¥ä½¿ç”¨ä¼˜å…ˆé˜Ÿåˆ—
					- ä½¿ç”¨å †å®ç°çš„<span class="blue">å †æ’åº</span>(Heapsort) ï¼Œå¹³å‡æ—¶é—´å¤æ‚åº¦ä¸º$ğ‘‚(ğ‘›ğ‘™ğ‘œğ‘”ğ‘›)$
					- ä¼˜å…ˆé˜Ÿåˆ—å¸¸ç”¨äºè®¡ç®—æœºæ“ä½œç³»ç»Ÿä¸­çš„ä»»åŠ¡è°ƒåº¦ï¼Œä¾‹å¦‚åŸºäºä¼˜å…ˆçº§çš„è¿›ç¨‹è°ƒåº¦
					- å­—ç¬¦ä¸²ä¸­ç”¨äºæ±‚æœ€ä¼˜æ— å‰ç¼€ç å³å“ˆå¤«æ›¼ç¼–ç ï¼Œä½¿ç”¨æœ€å°å †æ¥å®ç°
					- åœ¨å›¾ç®—æ³•ä¸­ï¼Œä½¿ç”¨ä¼˜å…ˆé˜Ÿåˆ—è§£å†³åŸºäºè´ªå¿ƒæ€æƒ³çš„æœ€å°ç”Ÿæˆæ ‘ç­‰é—®é¢˜
					</textarea>
				</section>
				<section data-markdown>
					<textarea data-template>
					###	[3253 -- Fence Repair (poj.org)](http://poj.org/problem?id=3253)
					------
					- å°†ä¸€ä¸ªé•¿æœ¨æ¿è¿›è¡Œn-1æ¬¡åˆ‡å‰²ï¼Œåˆ‡æˆnä¸ªå°æœ¨æ¿ï¼Œåˆ‡æœ¨æ¿çš„èŠ±è´¹ç­‰äºæœ¨æ¿çš„é•¿åº¦ã€‚ç»™å‡ºæœ€ååˆ‡å‰²åçš„é•¿åº¦ï¼Œæ±‚è´¹ç”¨æœ€å°çš„åˆ‡å‰²æ–¹æ¡ˆ
					- ä¾‹å¦‚
						- å°†21åˆ‡å‰²æˆ8,5,8ï¼Œå¯ä»¥å…ˆåˆ‡æˆ13å’Œ8ï¼Œæ€»è´¹ç”¨21+13=34
						- å¦‚æœå…ˆåˆ‡æˆ16å’Œ5ï¼Œåˆ™æ€»è´¹ç”¨21+16=37ï¼Œè¶…è¿‡34
					- åˆ†æ
						- å‡å®šæœ€ååˆ‡å‰²å®Œçš„æ‰€æœ‰æœ¨æ¿åœ¨ä¸€ä¸ªé›†åˆé‡Œï¼Œæ¯æ¬¡ä»é›†åˆä¸­é€‰å‡ºä¸¤ä¸ªæœ€çŸ­çš„ï¼Œå®ƒä»¬çš„å’Œä¸ºä¸€æ¬¡åˆ‡å‰²è´¹ç”¨ï¼Œå°†å®ƒä»¬åˆå¹¶åæ”¾å›é›†åˆï¼Œé‡å¤ä»¥ä¸Šæ“ä½œï¼Œæœ€åç´¯è®¡åˆ‡å‰²è´¹ç”¨å³å¯
						- é¢˜ç›®çš„ä¸»è¦æ“ä½œæ˜¯ä»é›†åˆä¸­æ¯æ¬¡å–å‡ºæœ€å°çš„ä¸¤ä¸ªå€¼ï¼Œæ¯æ¬¡éƒ½é‡æ–°æ’åºçš„è¯ç®—æ³•å¤æ‚åº¦ä¼šæé«˜ï¼Œè€Œé‡‡ç”¨å †èƒ½å¾ˆå¥½çš„è§£å†³è¿™ä¸ªé—®é¢˜
					
					</textarea>
				</section>
				<section>
					<pre><code data-trim data-noescape data-line-numbers="5-21|22-35|36-56|65,70-73" ><script type="text/template">
							#include <cstdio>
							#include <algorithm>
							using namespace std;
							const int N = 20005;
							long long H[N]; 	//ç”¨ä¸€ç»´æ•°ç»„Hå­˜å‚¨å †
							int Size;       	//å †çš„å¤§å°
							//è¿”å›èŠ‚ç‚¹xçš„çˆ¶èŠ‚ç‚¹ä¸‹æ ‡
							int parent(int x)
							{
								return x / 2;
							}
							//è¿”å›èŠ‚ç‚¹xçš„å·¦å„¿å­èŠ‚ç‚¹ä¸‹æ ‡
							int left(int x)
							{
								return 2 * x;
							}
							//è¿”å›èŠ‚ç‚¹xçš„å³å„¿å­èŠ‚ç‚¹ä¸‹æ ‡
							int right(int x)
							{
								return 2 * x + 1;
							}
							//é€’å½’è°ƒæ•´æœ€å°å †
							void minheapify(long long *H, int x)
							{
								int y; //xã€xå·¦å„¿å­ã€xå³å„¿å­ä¸‰ä¸ªèŠ‚ç‚¹ä¸­å€¼æœ€å°çš„èŠ‚ç‚¹
								int l = left(x);
								int r = right(x);
								y = (l <= Size && H[l] < H[x]) ? l : x;
								y = (r <= Size && H[r] < H[y]) ? r : y;
								if (y != x)
								{
									swap(H[x], H[y]); //æœ€å°èŠ‚ç‚¹ä¸æ˜¯xï¼Œå°±å’Œxè¿›è¡Œäº¤æ¢
									minheapify(H, y); //å‘ä¸‹é€’å½’è°ƒæ•´æ‰€æœ‰èŠ‚ç‚¹
								}
							}
							//è¿”å›å †ä¸­æœ€å°å…ƒç´ yå¹¶åˆ é™¤å †é¡¶å…ƒç´ 
							int minheappop(long long *H)
							{
								long long y;
								if (Size > 0)
								{
									y = H[1];
									H[1] = H[Size]; //å°†æ•°ç»„ä¸­æœ€åä¸€ä¸ªå…ƒç´ ç§»åˆ°å †é¡¶
									Size--;
									minheapify(H, 1); //ä»å †é¡¶å‘ä¸‹å¯¹å †è¿›è¡Œè°ƒæ•´
								}
								return y;
							}
							// å‘å †ä¸­æ’å…¥å…ƒç´ x
							void minheapinsert(long long *H, long long x)
							{
								H[++Size] = x; //å°†å…ƒç´ xæ’å…¥æ•°ç»„æœ€å
								//å’Œå…¶çˆ¶èŠ‚ç‚¹æ¯”è¾ƒï¼Œå¦‚æœå°äºçˆ¶èŠ‚ç‚¹ï¼Œå°±æŠŠå®ƒå’Œçˆ¶èŠ‚ç‚¹äº¤æ¢ï¼Œç›´åˆ°æ ¹èŠ‚ç‚¹ä¸ºæ­¢
							for (int i = Size; i > 1 && H[parent(i)] > H[i]; i = parent(i))
									swap(H[parent(i)], H[i]);
							}
							int main()
							{
								int n;
								scanf("%d", &n);
								while (n--)
								{
									long long a;
									scanf("%lld", &a);
									minheapinsert(H, a); //å°†æœ¨æ¿é•¿åº¦ä¾æ¬¡æ’å…¥å †ä¸­
								}
								long long ans = 0;
								while (Size > 1)
								{
									long long u = minheappop(H);
									long long v = minheappop(H);
									ans += u + v; //æ¯æ¬¡å–å‡ºå †é¡¶ä¸¤ä¸ªå…ƒç´ ï¼Œå°†å®ƒä»¬çš„å’Œç´¯åŠ 
									minheapinsert(H, u + v);
								}
								printf("%lld\n", ans);
								return 0;
							}							
					</script></code></pre>
				</section>
				<section data-markdown>
					<textarea data-template>
					## ä½¿ç”¨ä¼˜å…ˆé˜Ÿåˆ—
					------
					<pre><code data-trim data-noescape data-line-numbers="2,8,13,17-22"><script type="text/template">
							#include <cstdio>
							#include <queue>
							using namespace std;
							int main()
							{
								int n;
								long long a, ans = 0;
							priority_queue<long long, vector<long long>, greater<long long> > Q;
								scanf("%d", &n);
								while (n--)
								{
									scanf("%lld", &a);
									Q.push(a);
								}
								while (Q.size() > 1)
								{
									long long x = Q.top();
									Q.pop();
									long long y = Q.top();
									Q.pop();
									ans += x + y;
									Q.push(x + y);
								}
								printf("%lld\n", ans);
								return 0;
							}
						</script></code></pre>
					</textarea>
				</section>
			</section>
		</div>
	</div>

	<script src="dist/reveal.js"></script>
	<script src="plugin/notes/notes.js"></script>
	<script src="plugin/markdown/markdown.js"></script>
	<script src="plugin/math/math.js"></script>
	<script src="plugin/highlight/highlight.js"></script>
	<script>
		// More info about initialization & config:
		// - https://revealjs.com/initialization/
		// - https://revealjs.com/config/
		Reveal.initialize({
			hash: true,
			slideNumber: 'c/t',
			transition: 'none',
			width: 1024, 
			height: 768,
			// Learn about plugins: https://revealjs.com/plugins/
			plugins: [RevealMarkdown, RevealHighlight, RevealNotes, RevealMath.KaTeX]
		});
	</script>
</body>

</html>